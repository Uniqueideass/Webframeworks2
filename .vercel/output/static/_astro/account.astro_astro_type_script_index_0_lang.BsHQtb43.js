import{a as i,s as r}from"./supabaseClient.C7lYSNS7.js";const l=document.getElementById("signup-form"),d=i();console.log(d);l&&l.addEventListener("submit",async s=>{s.preventDefault(),console.log("submit button clicked");const a=document.getElementById("name").value,o=document.getElementById("email").value,e=document.getElementById("password").value,{data:t,error:n}=await r.auth.signUp({email:o,password:e,options:{data:{full_name:a}}});console.log(t),n?alert(`Error: ${n.message}`):(alert("Signup successful!"),window.location.href="/")});const u=document.getElementById("signin-form");u&&u.addEventListener("submit",async s=>{s.preventDefault();const a=document.getElementById("signin-email").value,o=document.getElementById("signin-password").value,{data:e,error:t}=await r.auth.signInWithPassword({email:a,password:o});console.log(e),t?alert(`Error: ${t.message}`):(alert("Signin successful!"),window.location.href="/blog")});if(document.getElementById("account")){const s=document.getElementById("fullname"),a=document.getElementById("save-btn");window.addEventListener("load",async()=>{const{data:e,error:t}=await r.auth.getUser();if(t)return console.error("Error retrieving user session:",t.message),null;const n=e?.user?.user_metadata?.full_name||null;n&&(s.value=n)}),a&&a.addEventListener("click",async e=>{e.preventDefault();const t=document.getElementById("update-password").value;if(t!==""||s.value!==""){const{error:n}=await r.auth.updateUser({password:t||void 0,data:{full_name:s.value.trim()||void 0}});alert(n?`Error updating user details: ${n.message}`:"User details updated successfully!")}else alert("Provide at least one field to update.")});const o=document.getElementById("sign-out-btn");o&&o.addEventListener("click",async()=>{const{error:e}=await r.auth.signOut();e?alert(`Error: ${e.message}`):(alert("Sign out successful"),window.location.href="/")})}
